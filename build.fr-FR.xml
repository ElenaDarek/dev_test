<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="run" name="bitext2tmx">
  <description>Construit, teste et exÃ©cute bitext2tmx_translate</description>
  <property name="version" value="-1.0M0.1"/>
  <property name="build" value="-140117"/>
  <property name="bitext2tmx.compiler.debug" value="false"/>

  <target description="Set up directory structure and  environment" name="init">
    <mkdir dir="build"/><!-- <mkdir dir="dist"/> --></target>

  <target depends="init" description="Compile classes" name="compile">
    <javac debug="{bitext2tmx.compiler.debug}" deprecation="false" destdir="build" nowarn="true" source="1.5" srcdir="src" target="1.5">
      <classpath>
        <fileset dir="lib" includes="**/*.jar"/>
      </classpath>
    </javac><!-- Straight copy of image, will fix better --> <!--<copy file="src/net/sf/bitext2tmx/ui/dialogs/about.png" tofile="build/net/sf/bitext2tmx/ui/dialogs/about.png"/>--><copy todir="build">
      <fileset dir="src" excludes="**/*.java"/>
    </copy>
  </target>

  <target depends="compile" description="Build jar" name="jar"><!-- Use this if you to leave old jar alone, create 'dist' first! --> <!-- <jar jarfile="dist/bitext2tmx.jar" manifest="MANIFEST.MF"> --> <!--          Overwrites existing jar, okay for development          You have been warned!    --><jar jarfile="bitext2tmx${version}${build}.jar" manifest="MANIFEST.MF">
      <fileset dir="build"><!--<include name="**/*.class" />
        <include name="**/about.png" />--></fileset>
    </jar>
  </target>

  <target depends="jar,compile" description="Run this mother" name="run">
    <java fork="true" jar="./bitext2tmx${version}${build}.jar" maxmemory="256" spawn="true">
      <arg value="-noserver"/>
    </java>
  </target>

  <target depends="init" description="Clean up after build process" name="clean">
    <delete dir="build" verbose="false"/>
    <delete file="bitext2tmx${version}${build}.jar" verbose="true"/><!-- <delete dir="dist" verbose="false"/> --></target>

</project>